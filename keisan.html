<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d6d6d; -webkit-text-stroke: #6d6d6d}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6b0001; -webkit-text-stroke: #6b0001}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #fb0007; -webkit-text-stroke: #fb0007}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #0000ff; -webkit-text-stroke: #0000ff}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4d5055; -webkit-text-stroke: #4d5055}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #18702b; -webkit-text-stroke: #18702b}
    span.s1 {font-kerning: none; background-color: #ecf1f7}
    span.s2 {font-kerning: none; color: #fb0007; background-color: #ecf1f7; -webkit-text-stroke: 0px #fb0007}
    span.s3 {font-kerning: none; color: #2a2a2a; background-color: #ecf1f7; -webkit-text-stroke: 0px #2a2a2a}
    span.s4 {font-kerning: none; color: #000000; background-color: #ecf1f7; -webkit-text-stroke: 0px #000000}
    span.s5 {font-kerning: none; color: #0000ff; background-color: #ecf1f7; -webkit-text-stroke: 0px #0000ff}
    span.s6 {font-kerning: none; color: #6b0001; background-color: #ecf1f7; -webkit-text-stroke: 0px #6b0001}
    span.s7 {font-kerning: none; color: #18702b; background-color: #ecf1f7; -webkit-text-stroke: 0px #18702b}
    span.s8 {font-kerning: none; color: #093c94; background-color: #ecf1f7; -webkit-text-stroke: 0px #093c94}
    span.s9 {font-kerning: none; color: #6f0ec3; background-color: #ecf1f7; -webkit-text-stroke: 0px #6f0ec3}
    span.s10 {font-kerning: none; color: #4d5055; background-color: #ecf1f7; -webkit-text-stroke: 0px #4d5055}
    span.s11 {font-kerning: none; color: #137646; background-color: #ecf1f7; -webkit-text-stroke: 0px #137646}
    span.s12 {font-kerning: none}
    span.s13 {font-kerning: none; color: #a4450b; background-color: #ecf1f7; -webkit-text-stroke: 0px #a4450b}
    span.s14 {font-kerning: none; color: #0e6e6d; background-color: #ecf1f7; -webkit-text-stroke: 0px #0e6e6d}
    span.s15 {font-kerning: none; color: #2316b2; background-color: #ecf1f7; -webkit-text-stroke: 0px #2316b2}
    span.s16 {font-kerning: none; color: #bf1c25; background-color: #ecf1f7; -webkit-text-stroke: 0px #bf1c25}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"ja"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">title</span><span class="s3">&gt;</span><span class="s4">年齢計算</span><span class="s3">&lt;/</span><span class="s1">title</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">body</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s7">'Inter'</span><span class="s1">, </span><span class="s8">sans-serif</span><span class="s1">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">-webkit-font-smoothing:</span><span class="s4"> </span><span class="s8">antialiased</span><span class="s4">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">-moz-osx-font-smoothing:</span><span class="s4"> </span><span class="s8">grayscale</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.input-error</span><span class="s4"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-color:</span><span class="s1"> </span><span class="s8">#f87171</span><span class="s1"> </span><span class="s9">!important</span><span class="s1">; </span><span class="s10">/* red-400 */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s11">0</span><span class="s1"> </span><span class="s11">0</span><span class="s1"> </span><span class="s11">0</span><span class="s1"> </span><span class="s11">2px</span><span class="s1"> </span><span class="s8">#fecaca</span><span class="s1">; </span><span class="s10">/* red-200 */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.error-message</span><span class="s4"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> </span><span class="s8">#ef4444</span><span class="s1">; </span><span class="s10">/* red-500 */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-size:</span><span class="s1"> </span><span class="s11">0.875rem</span><span class="s1">; </span><span class="s10">/* 14px */</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">min-height:</span><span class="s4"> </span><span class="s11">1.25rem</span><span class="s4">; </span><span class="s1">/* Ensure space for error message */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.result-box-base</span><span class="s4"> {</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-left-width:</span><span class="s4"> </span><span class="s11">4px</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s11">1rem</span><span class="s1">; </span><span class="s10">/* p-4 */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-top:</span><span class="s1"> </span><span class="s11">1rem</span><span class="s1">; </span><span class="s10">/* mt-4 */</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">border-radius:</span><span class="s4"> </span><span class="s11">0.5rem</span><span class="s4">; </span><span class="s1">/* rounded-lg */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s11">0</span><span class="s1"> </span><span class="s11">4px</span><span class="s1"> </span><span class="s11">6px</span><span class="s1"> </span><span class="s11">-1px</span><span class="s1"> </span><span class="s8">rgba(</span><span class="s11">0</span><span class="s1">, </span><span class="s11">0</span><span class="s1">, </span><span class="s11">0</span><span class="s1">, </span><span class="s11">0.1</span><span class="s8">)</span><span class="s1">, </span><span class="s11">0</span><span class="s1"> </span><span class="s11">2px</span><span class="s1"> </span><span class="s11">4px</span><span class="s1"> </span><span class="s11">-1px</span><span class="s1"> </span><span class="s8">rgba(</span><span class="s11">0</span><span class="s1">, </span><span class="s11">0</span><span class="s1">, </span><span class="s11">0</span><span class="s1">, </span><span class="s11">0.06</span><span class="s8">)</span><span class="s1">; </span><span class="s10">/* shadow-md */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.age-result-box</span><span class="s4"> {</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">background-color:</span><span class="s4"> </span><span class="s8">#eff6ff</span><span class="s4">; </span><span class="s10">/* blue-50 */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-color:</span><span class="s1"> </span><span class="s8">#3b82f6</span><span class="s1">; </span><span class="s10">/* blue-500 */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.age-result-text</span><span class="s4"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> </span><span class="s8">#1e40af</span><span class="s1">; </span><span class="s10">/* blue-800 */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">textarea:focus</span><span class="s4"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">outline:</span><span class="s1"> </span><span class="s8">none</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border-color:</span><span class="s1"> </span><span class="s8">#60a5fa</span><span class="s1">; </span><span class="s10">/* blue-400 */</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s4"> </span><span class="s11">0</span><span class="s4"> </span><span class="s11">0</span><span class="s4"> </span><span class="s11">0</span><span class="s4"> </span><span class="s11">3px</span><span class="s4"> </span><span class="s8">rgba(</span><span class="s11">59</span><span class="s4">, </span><span class="s11">130</span><span class="s4">, </span><span class="s11">246</span><span class="s4">, </span><span class="s11">0.3</span><span class="s8">)</span><span class="s4">; </span><span class="s1">/* focus:ring-blue-500 with opacity */</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s3">&lt;</span><span class="s6">body</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-gradient-to-br from-slate-100 to-sky-100 min-h-screen flex items-center justify-center p-4 selection:bg-sky-300 selection:text-sky-900"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white p-6 sm:p-10 rounded-xl shadow-2xl w-full max-w-xl mx-auto"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">header</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-8 text-center"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h1</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-4xl sm:text-5xl font-bold text-sky-700 tracking-tight"</span><span class="s3">&gt;</span><span class="s4">年齢計算</span><span class="s3">&lt;/</span><span class="s6">h1</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-slate-500 mt-3 text-sm sm:text-base"</span><span class="s3">&gt;</span><span class="s1">生年月日または年を入力してください。</span><span class="s3">&lt;</span><span class="s6">br</span><span class="s3">&gt;</span><span class="s1">(例: 昭和50年1月1日, 1975/1/1, 19750101, s500101, 1989, h1)</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">header</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"space-y-5"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s4"> </span><span class="s2">for</span><span class="s3">=</span><span class="s1">"birthDateInput"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"block text-sm font-medium text-slate-700 mb-1.5"</span><span class="s3">&gt;</span><span class="s4">生年月日 または 年</span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">textarea</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"birthDateInput"</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"birthDateInput"</span><span class="s4"> </span><span class="s2">rows</span><span class="s3">=</span><span class="s1">"2"</span><span class="s4"> </span><span class="s2">placeholder</span><span class="s3">=</span><span class="s1">"例: 昭50.1.1, 19750101, s500101, 1989, h1"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-full p-3 border border-slate-300 rounded-lg shadow-sm transition duration-150 resize-none focus:border-sky-500 focus:ring-2 focus:ring-sky-500 focus:ring-opacity-50"</span><span class="s3">&gt;&lt;/</span><span class="s6">textarea</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"error-container"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"error-message mt-1.5"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p4"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"result-area"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s9">const</span><span class="s1"> eraMapping = {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'明治'</span><span class="s1">: { startYear: </span><span class="s13">1868</span><span class="s1">, name: </span><span class="s7">'meiji'</span><span class="s1">, initial: </span><span class="s7">'m'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'大正'</span><span class="s1">: { startYear: </span><span class="s13">1912</span><span class="s1">, name: </span><span class="s7">'taisho'</span><span class="s1">, initial: </span><span class="s7">'t'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'昭和'</span><span class="s1">: { startYear: </span><span class="s13">1926</span><span class="s1">, name: </span><span class="s7">'showa'</span><span class="s1">,<span class="Apple-converted-space">  </span>initial: </span><span class="s7">'s'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'平成'</span><span class="s1">: { startYear: </span><span class="s13">1989</span><span class="s1">, name: </span><span class="s7">'heisei'</span><span class="s1">, initial: </span><span class="s7">'h'</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'令和'</span><span class="s1">: { startYear: </span><span class="s13">2019</span><span class="s1">, name: </span><span class="s7">'reiwa'</span><span class="s1">,<span class="Apple-converted-space">  </span>initial: </span><span class="s7">'r'</span><span class="s1"> }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s9">const</span><span class="s1"> eraStartDates = { </span><span class="s10">// 元号の正確な開始日</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'meiji'</span><span class="s1">:<span class="Apple-converted-space">  </span>{ year: </span><span class="s13">1868</span><span class="s1">, month: </span><span class="s13">10</span><span class="s1">, day: </span><span class="s13">23</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'taisho'</span><span class="s1">: { year: </span><span class="s13">1912</span><span class="s1">, month: </span><span class="s13">7</span><span class="s1">, day: </span><span class="s13">30</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'showa'</span><span class="s1">:<span class="Apple-converted-space">  </span>{ year: </span><span class="s13">1926</span><span class="s1">, month: </span><span class="s13">12</span><span class="s1">, day: </span><span class="s13">25</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'heisei'</span><span class="s1">: { year: </span><span class="s13">1989</span><span class="s1">, month: </span><span class="s13">1</span><span class="s1">, day: </span><span class="s13">8</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'reiwa'</span><span class="s1">:<span class="Apple-converted-space">  </span>{ year: </span><span class="s13">2019</span><span class="s1">, month: </span><span class="s13">5</span><span class="s1">, day: </span><span class="s13">1</span><span class="s1"> }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s9">const</span><span class="s1"> eraEndDates = { </span><span class="s10">// 各元号の最終日</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'meiji'</span><span class="s1">:<span class="Apple-converted-space">  </span>{ year: </span><span class="s13">1912</span><span class="s1">, month: </span><span class="s13">7</span><span class="s1">, day: </span><span class="s13">29</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'taisho'</span><span class="s1">: { year: </span><span class="s13">1926</span><span class="s1">, month: </span><span class="s13">12</span><span class="s1">, day: </span><span class="s13">24</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'showa'</span><span class="s1">:<span class="Apple-converted-space">  </span>{ year: </span><span class="s13">1989</span><span class="s1">, month: </span><span class="s13">1</span><span class="s1">, day: </span><span class="s13">7</span><span class="s1"> },</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">'heisei'</span><span class="s1">: { year: </span><span class="s13">2019</span><span class="s1">, month: </span><span class="s13">4</span><span class="s1">, day: </span><span class="s13">30</span><span class="s1"> }</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>};</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s9">const</span><span class="s1"> birthDateInput = document.getElementById(</span><span class="s7">'birthDateInput'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s9">const</span><span class="s1"> resultArea = document.getElementById(</span><span class="s7">'result-area'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s9">const</span><span class="s1"> errorContainer = document.getElementById(</span><span class="s7">'error-container'</span><span class="s1">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s9">function</span><span class="s1"> zenkakuToHankaku(str) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (</span><span class="s9">typeof</span><span class="s1"> str !== </span><span class="s7">'string'</span><span class="s1">) </span><span class="s9">return</span><span class="s1"> str;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">return</span><span class="s1"> str.replace(</span><span class="s6">/[０-９]/</span><span class="s9">g</span><span class="s1">, </span><span class="s9">function</span><span class="s1">(s) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">return</span><span class="s1"> </span><span class="s14">String</span><span class="s1">.fromCharCode(s.charCodeAt(</span><span class="s13">0</span><span class="s1">) - </span><span class="s15">0xFEE0</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>birthDateInput.addEventListener(</span><span class="s7">'input'</span><span class="s1">, () =&gt; {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">let</span><span class="s1"> inputText = birthDateInput.value.trim();</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>errorContainer.textContent = </span><span class="s7">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>resultArea.innerHTML = </span><span class="s7">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>birthDateInput.classList.remove(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (!inputText) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>inputText = zenkakuToHankaku(inputText);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">let</span><span class="s1"> gregorianYear, month, day;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">let</span><span class="s1"> eraKanji = </span><span class="s7">''</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">let</span><span class="s1"> warekiYearText = </span><span class="s7">''</span><span class="s1">; </span><span class="s10">// 表示用の和暦年（「元」または数字）</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">let</span><span class="s1"> parsedDateString = </span><span class="s7">''</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">let</span><span class="s1"> isYearOnlyInput = </span><span class="s9">false</span><span class="s1">;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// 詳細な日付形式の正規表現</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">const</span><span class="s1"> yyyymmddRegex = </span><span class="s6">/^(\d{4})(\d{2})(\d{2})$/</span><span class="s1">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s9">const</span><span class="s4"> gYYMMDDRegex = </span><span class="s1">/^([mtshr])(\d{1,2})(\d{2})(\d{2})$/</span><span class="s9">i</span><span class="s4">;<span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s9">const</span><span class="s4"> warekiKanjiRegex = </span><span class="s1">/^(明治|大正|昭和|平成|令和)\s*(\d+|元)\s*年\s*(\d{1,2})\s*月\s*(\d{1,2})\s*日$/</span><span class="s4">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s9">const</span><span class="s4"> seirekiYmdRegex = </span><span class="s1">/^(\d{4})\s*年\s*(\d{1,2})\s*月\s*(\d{1,2})\s*日$/</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">const</span><span class="s1"> seirekiSlashRegex = /^(</span><span class="s16">\</span><span class="s1">d{</span><span class="s13">4</span><span class="s1">})</span><span class="s16">\</span><span class="s1">s*[/</span><span class="s16">／</span><span class="s1">]</span><span class="s16">\</span><span class="s1">s*(</span><span class="s16">\</span><span class="s1">d{</span><span class="s13">1</span><span class="s1">,</span><span class="s13">2</span><span class="s1">})</span><span class="s16">\</span><span class="s1">s*[</span><span class="s6">/／]\s*(\d{1,2})$/</span><span class="s1">;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// 年のみの形式の正規表現</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">const</span><span class="s1"> warekiYearOnlyRegex = </span><span class="s6">/^([mtshr])(\d{1,2})$/</span><span class="s9">i</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">const</span><span class="s1"> seirekiYearOnlyRegex = </span><span class="s6">/^(\d{4})$/</span><span class="s1">;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">let</span><span class="s1"> match;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (match = inputText.match(yyyymmddRegex)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>gregorianYear = parseInt(match[</span><span class="s13">1</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>month = parseInt(match[</span><span class="s13">2</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>day = parseInt(match[</span><span class="s13">3</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>parsedDateString = </span><span class="s7">`</span><span class="s1">${gregorianYear}</span><span class="s7">年</span><span class="s1">${month}</span><span class="s7">月</span><span class="s1">${day}</span><span class="s7">日`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s9">else</span><span class="s1"> </span><span class="s9">if</span><span class="s1"> (match = inputText.match(gYYMMDDRegex)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> eraInitial = match[</span><span class="s13">1</span><span class="s1">].toLowerCase();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> warekiYearNum = parseInt(match[</span><span class="s13">2</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>month = parseInt(match[</span><span class="s13">3</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>day = parseInt(match[</span><span class="s13">4</span><span class="s1">]);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> foundEra = </span><span class="s14">Object</span><span class="s1">.entries(eraMapping).find(([key, value]) =&gt; value.initial === eraInitial);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">if</span><span class="s1"> (!foundEra) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>errorContainer.textContent = </span><span class="s7">"元号の頭文字が認識できません。"</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>eraKanji = foundEra[</span><span class="s13">0</span><span class="s1">];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> eraInfo = foundEra[</span><span class="s13">1</span><span class="s1">];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>gregorianYear = eraInfo.startYear + warekiYearNum - </span><span class="s13">1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>warekiYearText = (warekiYearNum === </span><span class="s13">1</span><span class="s1"> &amp;&amp; gregorianYear === eraInfo.startYear) ? </span><span class="s7">'元'</span><span class="s1"> : </span><span class="s14">String</span><span class="s1">(warekiYearNum);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>parsedDateString = </span><span class="s7">`</span><span class="s1">${eraKanji}${warekiYearText}</span><span class="s7">年</span><span class="s1">${month}</span><span class="s7">月</span><span class="s1">${day}</span><span class="s7">日 (</span><span class="s1">${gregorianYear}</span><span class="s7">年</span><span class="s1">${month}</span><span class="s7">月</span><span class="s1">${day}</span><span class="s7">日)`</span><span class="s1">;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// 元号の範囲チェックは後続のバリデーションで行う</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s9">else</span><span class="s1"> </span><span class="s9">if</span><span class="s1"> (match = inputText.match(warekiKanjiRegex)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>eraKanji = match[</span><span class="s13">1</span><span class="s1">];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>warekiYearText = match[</span><span class="s13">2</span><span class="s1">];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>month = parseInt(match[</span><span class="s13">3</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>day = parseInt(match[</span><span class="s13">4</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> eraInfo = eraMapping[eraKanji];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">if</span><span class="s1"> (!eraInfo) {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>errorContainer.textContent = </span><span class="s7">"元号が認識できません。"</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> warekiYearNum = (warekiYearText === </span><span class="s7">'元'</span><span class="s1">) ? </span><span class="s13">1</span><span class="s1"> : parseInt(warekiYearText);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>gregorianYear = eraInfo.startYear + warekiYearNum - </span><span class="s13">1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>parsedDateString = </span><span class="s7">`</span><span class="s1">${eraKanji}${warekiYearText}</span><span class="s7">年</span><span class="s1">${month}</span><span class="s7">月</span><span class="s1">${day}</span><span class="s7">日 (</span><span class="s1">${gregorianYear}</span><span class="s7">年</span><span class="s1">${month}</span><span class="s7">月</span><span class="s1">${day}</span><span class="s7">日)`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s9">else</span><span class="s1"> </span><span class="s9">if</span><span class="s1"> (match = inputText.match(seirekiYmdRegex)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>gregorianYear = parseInt(match[</span><span class="s13">1</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>month = parseInt(match[</span><span class="s13">2</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>day = parseInt(match[</span><span class="s13">3</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>parsedDateString = </span><span class="s7">`</span><span class="s1">${gregorianYear}</span><span class="s7">年</span><span class="s1">${month}</span><span class="s7">月</span><span class="s1">${day}</span><span class="s7">日`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s9">else</span><span class="s1"> </span><span class="s9">if</span><span class="s1"> (match = inputText.match(seirekiSlashRegex)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>gregorianYear = parseInt(match[</span><span class="s13">1</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>month = parseInt(match[</span><span class="s13">2</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>day = parseInt(match[</span><span class="s13">3</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>parsedDateString = </span><span class="s7">`</span><span class="s1">${gregorianYear}</span><span class="s7">年</span><span class="s1">${month}</span><span class="s7">月</span><span class="s1">${day}</span><span class="s7">日 (入力: </span><span class="s1">${match[</span><span class="s13">0</span><span class="s1">]}</span><span class="s7">)`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s9">else</span><span class="s1"> </span><span class="s9">if</span><span class="s1"> (match = inputText.match(warekiYearOnlyRegex)) { </span><span class="s10">// 年のみ: 和暦</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>isYearOnlyInput = </span><span class="s9">true</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> eraInitial = match[</span><span class="s13">1</span><span class="s1">].toLowerCase();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> warekiYearNumInput = parseInt(match[</span><span class="s13">2</span><span class="s1">]);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> foundEraEntry = </span><span class="s14">Object</span><span class="s1">.entries(eraMapping).find(([key, value]) =&gt; value.initial === eraInitial);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">if</span><span class="s1"> (!foundEraEntry) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>errorContainer.textContent = </span><span class="s7">"元号の頭文字が認識できません。"</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>eraKanji = foundEraEntry[</span><span class="s13">0</span><span class="s1">];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> eraInfo = foundEraEntry[</span><span class="s13">1</span><span class="s1">];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>gregorianYear = eraInfo.startYear + warekiYearNumInput - </span><span class="s13">1</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>warekiYearText = (warekiYearNumInput === </span><span class="s13">1</span><span class="s1"> &amp;&amp; gregorianYear === eraInfo.startYear) ? </span><span class="s7">'元'</span><span class="s1"> : </span><span class="s14">String</span><span class="s1">(warekiYearNumInput);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s9">else</span><span class="s1"> </span><span class="s9">if</span><span class="s1"> (match = inputText.match(seirekiYearOnlyRegex)) { </span><span class="s10">// 年のみ: 西暦</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>isYearOnlyInput = </span><span class="s9">true</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>gregorianYear = parseInt(match[</span><span class="s13">1</span><span class="s1">]);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>} </span><span class="s9">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>errorContainer.textContent = </span><span class="s7">"入力形式が正しくありません。"</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// 年のみ入力の場合の処理</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (isYearOnlyInput) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> currentYear = </span><span class="s9">new</span><span class="s1"> </span><span class="s14">Date</span><span class="s1">().getFullYear();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">if</span><span class="s1"> (isNaN(gregorianYear) || gregorianYear &lt;= </span><span class="s13">0</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>errorContainer.textContent = </span><span class="s7">"年を正しく入力してください。"</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                 </span></span><span class="s1">// 元号の開始年より前の年はエラー（和暦年のみ入力時）</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">if</span><span class="s1"> (eraKanji) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s9">const</span><span class="s1"> eraInfo = eraMapping[eraKanji];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s9">if</span><span class="s1"> (gregorianYear &lt; eraInfo.startYear) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                         </span>errorContainer.textContent = </span><span class="s7">`</span><span class="s1">${eraKanji}${warekiYearText}</span><span class="s7">年は元号の開始年(</span><span class="s1">${eraInfo.startYear}</span><span class="s7">年)より前です。`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                         </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                         </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// 元号の終了年より後の年もエラー (令和以外)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s9">const</span><span class="s1"> eraEndDateInfo = eraEndDates[eraInfo.name];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s9">if</span><span class="s1"> (eraEndDateInfo &amp;&amp; gregorianYear &gt; eraEndDateInfo.year) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>errorContainer.textContent = </span><span class="s7">`</span><span class="s1">${eraKanji}${warekiYearText}</span><span class="s7">年は元号の終了年(</span><span class="s1">${eraEndDateInfo.year}</span><span class="s7">年)より後です。`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">if</span><span class="s1"> (gregorianYear &gt; currentYear + </span><span class="s13">1</span><span class="s1">) {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>errorContainer.textContent = </span><span class="s7">"未来の年です。"</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// 非常に古い年の制限 (例: 明治より前はエラー)</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">if</span><span class="s1"> (gregorianYear &lt; eraMapping[</span><span class="s7">'明治'</span><span class="s1">].startYear &amp;&amp; !eraKanji) { </span><span class="s10">// 西暦入力で明治より前</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>errorContainer.textContent = </span><span class="s7">"年が古すぎます（明治以降で入力してください）。"</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> ageApproxHigh = currentYear - gregorianYear;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> ageApproxLow = ageApproxHigh - </span><span class="s13">1</span><span class="s1">;</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">let</span><span class="s1"> displayYearString = </span><span class="s7">''</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">if</span><span class="s1"> (eraKanji) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>displayYearString = </span><span class="s7">`</span><span class="s1">${eraKanji}${warekiYearText}</span><span class="s7">年 (</span><span class="s1">${gregorianYear}</span><span class="s7">年) (概算)`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>} </span><span class="s9">else</span><span class="s1"> {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>displayYearString = </span><span class="s7">`</span><span class="s1">${gregorianYear}</span><span class="s7">年 (概算)`</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>resultArea.innerHTML = </span><span class="s7">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="result-box-base age-result-box"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p class="text-lg font-semibold age-result-text"&gt;計算結果&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p class="mt-1.5 age-result-text text-sm"&gt;生年: </span><span class="s4">${displayYearString}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;p class="text-3xl font-bold text-sky-600 mt-2.5"&gt;</span><span class="s4">${ageApproxLow &lt; </span><span class="s13">0</span><span class="s4"> ? </span><span class="s13">0</span><span class="s4"> : ageApproxLow}</span><span class="s1">～</span><span class="s4">${ageApproxHigh}</span><span class="s1">歳&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span>`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">return</span><span class="s1">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// --- 以下、年月日が完全に指定された場合のバリデーションと計算 ---</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">let</span><span class="s1"> isValid = </span><span class="s9">true</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">let</span><span class="s1"> errors = [];</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (isNaN(gregorianYear) || gregorianYear &lt;= </span><span class="s13">0</span><span class="s1"> ) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                 </span>errors.push(</span><span class="s7">"年を正しく入力してください。"</span><span class="s1">); isValid = </span><span class="s9">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (isNaN(month) || month &lt; </span><span class="s13">1</span><span class="s1"> || month &gt; </span><span class="s13">12</span><span class="s1">) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>errors.push(</span><span class="s7">"月を1から12の間で入力してください。"</span><span class="s1">); isValid = </span><span class="s9">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (isNaN(day) || day &lt; </span><span class="s13">1</span><span class="s1"> || day &gt; </span><span class="s13">31</span><span class="s1">) {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>errors.push(</span><span class="s7">"日を1から31の間で入力してください。"</span><span class="s1">); isValid = </span><span class="s9">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (!isValid) {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>errorContainer.textContent = errors.join(</span><span class="s7">' '</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// 元号の正確な日付範囲チェック (年月日が揃っている場合)</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s4"> (eraKanji) { </span><span class="s1">// eraKanji が設定されている = 和暦ベースの入力だった</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> eraKey = eraMapping[eraKanji].name;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> eraStartDate = eraStartDates[eraKey];</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">if</span><span class="s1"> (gregorianYear &lt; eraStartDate.year ||<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>(gregorianYear === eraStartDate.year &amp;&amp; month &lt; eraStartDate.month) ||</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>(gregorianYear === eraStartDate.year &amp;&amp; month === eraStartDate.month &amp;&amp; day &lt; eraStartDate.day)) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>errors.push(</span><span class="s7">`</span><span class="s1">${eraKanji}${warekiYearText}</span><span class="s7">年は元号の開始日 (</span><span class="s1">${eraStartDate.year}</span><span class="s7">年</span><span class="s1">${eraStartDate.month}</span><span class="s7">月</span><span class="s1">${eraStartDate.day}</span><span class="s7">日) より前です。`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>isValid = </span><span class="s9">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">const</span><span class="s1"> eraEndDate = eraEndDates[eraKey]; </span><span class="s10">// 令和には存在しない</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">if</span><span class="s1"> (eraEndDate &amp;&amp;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>(gregorianYear &gt; eraEndDate.year ||</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>(gregorianYear === eraEndDate.year &amp;&amp; month &gt; eraEndDate.month) ||</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>(gregorianYear === eraEndDate.year &amp;&amp; month === eraEndDate.month &amp;&amp; day &gt; eraEndDate.day))) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>errors.push(</span><span class="s7">`</span><span class="s1">${eraKanji}${warekiYearText}</span><span class="s7">年は元号の終了日 (</span><span class="s1">${eraEndDate.year}</span><span class="s7">年</span><span class="s1">${eraEndDate.month}</span><span class="s7">月</span><span class="s1">${eraEndDate.day}</span><span class="s7">日) より後です。`</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>isValid = </span><span class="s9">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">const</span><span class="s1"> daysInMonth = </span><span class="s9">new</span><span class="s1"> </span><span class="s14">Date</span><span class="s1">(gregorianYear, month, </span><span class="s13">0</span><span class="s1">).getDate();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (day &gt; daysInMonth) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>errors.push(</span><span class="s7">`</span><span class="s1">${month}</span><span class="s7">月は</span><span class="s1">${daysInMonth}</span><span class="s7">日までです。`</span><span class="s1">); isValid = </span><span class="s9">false</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (!isValid) {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>errorContainer.textContent = errors.join(</span><span class="s7">' '</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">const</span><span class="s1"> birthDate = </span><span class="s9">new</span><span class="s1"> </span><span class="s14">Date</span><span class="s1">(gregorianYear, month - </span><span class="s13">1</span><span class="s1">, day);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">const</span><span class="s1"> today = </span><span class="s9">new</span><span class="s1"> </span><span class="s14">Date</span><span class="s1">();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>today.setHours(</span><span class="s13">0</span><span class="s1">,</span><span class="s13">0</span><span class="s1">,</span><span class="s13">0</span><span class="s1">,</span><span class="s13">0</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>birthDate.setHours(</span><span class="s13">0</span><span class="s1">,</span><span class="s13">0</span><span class="s1">,</span><span class="s13">0</span><span class="s1">,</span><span class="s13">0</span><span class="s1">);</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (birthDate &gt; today) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>errorContainer.textContent = </span><span class="s7">"未来の日付は入力できません。"</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>birthDateInput.classList.add(</span><span class="s7">'input-error'</span><span class="s1">);</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s9">return</span><span class="s1">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s12"></span><br></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">let</span><span class="s1"> age = today.getFullYear() - birthDate.getFullYear();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">const</span><span class="s1"> m = today.getMonth() - birthDate.getMonth();</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s9">if</span><span class="s1"> (m &lt; </span><span class="s13">0</span><span class="s1"> || (m === </span><span class="s13">0</span><span class="s1"> &amp;&amp; today.getDate() &lt; birthDate.getDate())) {</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>age--;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>resultArea.innerHTML = </span><span class="s7">`</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="result-box-base age-result-box"&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;p class="text-lg font-semibold age-result-text"&gt;計算結果&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;p class="mt-1.5 age-result-text text-sm"&gt;生年月日: </span><span class="s4">${parsedDateString}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;p class="text-3xl font-bold text-sky-600 mt-2.5"&gt;</span><span class="s4">${age}</span><span class="s1">歳&lt;/p&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">            </span>`</span><span class="s4">;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s12"></span><br></p>
</body>
</html>
